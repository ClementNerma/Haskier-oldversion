{
    "version": "7",

    "history": {
        "_init": {
            "actions": [
                {"type": "wait", "content": 1500},
                "{b_blue:Système} {italic:Quelqu'un cherche à vous joindre}",
                "{b_blue:Système} {italic:Pour ouvrir la communication, tapez <}{f_cyan:com open}{italic:>}"
            ],
            "todo": [
                "open-communication-port"
            ]
        },

        "communication ouverte": {
            "actions": [
                "Communication entrante...",
                "Ouverture du réseau...",
                "{b_red,f_white: - Bloqué par le pare-feu - }",
                "Veuillez désactiver le pare-feu\nPour plus d'informations, tapez <{f_cyan:help firewall}>"
            ],
            "todo": [
                {
                    "type": "afterCommand",
                    "content": "server.state('firewall') === false"
                }
            ]
        },

        "désactiver pare-feu": {
            "actions": [
                "Veuillez patienter...",
                "Réception de la communication...",
                {"type": "incoming-communication"},
                "??? : Bonsoir $name !",
                "??? : Vous voyez qui je suis, n'est-ce pas ?",
                "??? : C'est le chef qui m'envoie",
                "??? : Vous avez réussi à hacker nos serveurs et moi votre ordinateur",
                "??? : J'ai trouvé le fichier que vous aviez laissé sur notre serveur principal",
                {
                    "type": "file",
                    "filename": "Messieurs.txt",
                    "content": "Messieurs les hackers,\n\nJe me nomme $name, je suis étudiant à Paris et j'ai 17 ans.\nVous vous croyez les meilleurs ? Voici la preuve que non.\nJ'ai récupéré le fichier contenant la liste de vos membres.\nSi vous voulez des preuves, je vais vous en donner.\nMais si vous voulez que je passe sous silence vos activités, vous allez devoir répondre à mes attentes.\nVous pouvez me contacter par vous-même en retraçant mon adresse IP, n'est-ce pas ?\nJe vous attends.\n\n$name."
                },
                "??? : Ai-je besoin d'ajouter quelque chose ?",
                "??? : Très bien. Appellez-moi {italic:K}",
                "K : C'est moi qui suis chargé de la cellule d'enquête de notre organisation, {italic:Anonymas}",
                "K : Je dois avouer que j'ai été surpris lorsque vous avez récupéré la liste des membres",
                "K : Mais ceux qui ont été chargés de le sécuriser n'ont apparemment pas bien fait leur travail",
                "K : Enfin, quoi qu'il en soit, vous disposez maintenant de la liste de nos effectifs, n'est-ce pas ?",
                "K : Vous avez laissé suffisamment d'informations derrières vous pour que nous vous croyions",
                "K : Maintenant, me voici",
                "K : Que voulez-vous en échange de votre silence ?",
                {
                    "type": "choice",
                    "answers": ["Une place dans votre organisation"]
                },
                "K : Une place dans notre organisation... ?",
                "K : Très bien. Je vais voir ce que je peux faire",
                "K : Attendez un peu",
                {"type": "taken", "name": "K", "wait": 10000},
                "K : Mes supérieurs sont prêts à vous prendre à l'essai",
                "K : Je vous laisse vous préparer. Rouvrez la communication lorsque vous serez prêts",
                {"command": "com close"}
            ],
            "todo": [
                "open-communication-port"
            ]
        },

        "prêt pour l'essai": {
            "actions": [
                "K : Voici l'épreuve",
                "K : Vous devez, à l'aide des outils dont vous disposer sur votre ordinateur, réussir à récupérer le code qui se trouve sur notre serveur de test.",
                "K : Son adresse IP est {italic:127.2.5.364}. Il ne dispose d'aucune sécurité particulière, ce devrait être un vrai jeu d'enfant pour vous, n'est-ce pas ?",
                "K : Lorsque vous aurez trouvé, rouvrez le port communication et donnez-moi le code",
                "K : À tout de suite",
                {"command": "com close"}
            ],

            "todo": [
                "open-communication-port"
            ]
        },

        "code du serveur d'essai trouvé": {
            "actions": [
                "K : Quel est le code que vous avez trouvé ?",
                { "type": "input" },
                "K : $input ?",
                { "type": "if", "var": "input", "mustBe": 5479 },
                "K : Effectivement, c'est bien le bon code.",
                { "type": "else" },
                "K : Je suis désolé, mais ce n'est pas le bon code. Vous avez échoué.",
                { "type": "game-over" },
                { "type": "end" },
                "K : Je vais maintenant vous soumettre à un deuxième test, pour voir si vous pouvez vraiment aller loin.",
                "K : Vous allez pirater le serveur dont l'adresse IP est {italic:127.32.48.53} et écrire {italic:test réussi} dans le fichier {italic:try.txt}",
                "K : Rouvrez le port communication une fois que ça sera fait",
                { "command": "com close" }
            ],

            "todo": [
                "open-communication-port"
            ]
        },

        "fichier écrit sur le serveur d'essai 2": {
            "actions": [
                "K : Voyons voir...",
                "K : Je me connecte au serveur...",
                { "wait": 3000 },
                { "type": "if", "server": "127.32.48.53", "file": "try.txt", "mustBe": "test réussi" },
                "K : Le fichier a bien été modifié.",
                { "type": "else" },
                "K : Le fichier n'est pas correct.",
                { "type": "game-over" },
                { "type" : "end" },
                "K : Vous avez réussi l'épreuve d'essai. Nul doute que vous avez à votre disposition d'excellents outils."
            ],

            "todo": [
                "open-communication-port"
            ]
        }
    },

    "servers": {
        "__local": {
            "description": "Ordinateur personnel de $name",
            "login": {
                "identifier": "$master",
                "password": "m@st€rP@ssw0rd"
            },
            "files": {
                "documents": {
                    "mot de passe.txt": "Le mot de passe de l'ordinateur est :\nm@st€rP@ssw0rd"
                },
                ".sys": { ".log": "[]" }
            },
            "apps": ["browser", "app", "format", "hack-certificate-verification", "hack-geolocalisation"],
            "os": "Century",
            "filesTable": {},
            "networks": ["internet", "__local"]
        },

        "127.2.5.364": {
            "description": "Serveur Anonymas pour test de sécurité (1)",
            "security": ["certificate-verification"],
            "login": {
                "identifier": "master",
                "password"  : "for-hacking-test"
            },
            "files": {
                "code.txt": "Donnez ce code à K pour valider l'épreuve : 5479",
                ".sys": { ".log": "[]" }
            },
            "apps":  [],
            "os"  : "anonym0s",
            "filesTable": {},
            "networks": ["internet"]
        },

        "127.32.48.53": {
            "description": "Serveur Anonymas pour test de sécurity (2)",
            "security": ["certificate-verification", "geolocalisation"],
            "login": {
                "identifier": "master",
                "password"  : "for-hacking-test"
            },
            "files": {},
            "apps" : [],
            "os"   : "anonym0s",
            "filesTable": {},
            "networks": ["internet"]
        },

        "824.54.63.772.5": {
            "description": "Serveur maître Anonymas",
            "security": ["certificate-verification", "IP-blacklist", "geolocalisation", "ddos", "multi-tries-IP"],
            "ddos-complexity": 20,
            "files": {
                ".sys": { ".log": "[]" }
            },
            "apps": ["aes-server"],
            "os": "anonym0s-security",
            "filesTable": {},
            "networks": []
        }
    },

    "networks": {
        "internet": {
            "/home" : "Vous êtes sur la page d'accueil du réseau.\n\nVoici une liste des services disponibles :\n\n/infos  Informations sur le réseau\n/about  À propos du réseau",
            "/infos": "Réseau   : \"internet\"\nCryptage : Non\nFormat   : UTF-8",
            "/about": "Réseau \"internet\" créé par Macrosoft Corporation le 18 juin 1987. Toute utilisation frauduleuse peut faire l'objet de poursuites judiciaires.\nNous ne pouvons en aucun cas être tenus responsables d'éventuels problèmes liés à l'utilisation de ce réseau."
        },
        "__local": {"commentaire":"Mettre ici un fichier contenant des informations pratiques pour accélérer le jeu. Crypter le tout en AES et rendre sa décryption difficile !"}
    },

    "statesModel": {
        "firewall": true,
        "communicationOpened": false
    },

    "todoModels": {
        "open-communication-port": {
            "type": "afterCommand",
            "content": "server.state('communicationOpened') === true"
        }
    }
}
